<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verification</title>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth.js"></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .form-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .form-group {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<div class="form-container">
    <h2>OTP Verification</h2>
    <form id="otpForm">
        <div class="form-group">
            <label for="phoneNumber">Phone Number:</label>
            <input type="tel" id="phoneNumber" name="phoneNumber" required>
        </div>
        <div class="g-recaptcha" data-sitekey="6LcD86opAAAAAJw1ApUNEAlZL4G7hfl4q8VCLSQu"></div>
        <button type="button" onclick="sendOTP()">Send OTP</button>
        <div id="otpInput" style="display: none;">
            <div class="form-group">
                <label for="otp">Enter OTP:</label>
                <input type="text" id="otp" name="otp" required>
            </div>
            <button type="button" onclick="verifyOTP()">Verify OTP</button>
        </div>
    </form>
</div>

<script>
    // Initialize Firebase
    const firebaseConfig = {
    apiKey: "AIzaSyCQx8fwlrjgJPlFmBf8Xsm5zU6XTjcHlnQ",
    authDomain: "test-54836.firebaseapp.com",
    databaseURL: "https://test-54836-default-rtdb.firebaseio.com",
    projectId: "test-54836",
    storageBucket: "test-54836.appspot.com",
    messagingSenderId: "187753669530",
    appId: "1:187753669530:web:bb36a04f95c42f20f51023"
};
    firebase.initializeApp(firebaseConfig);

    let recaptchaVerifier;
    window.onload = function () {
        recaptchaVerifier = new firebase.auth.RecaptchaVerifier('otpForm', {
            'size': 'invisible',
            'callback': (response) => {
                // reCAPTCHA resolved, you can now submit the form
            }
        });
    };

    function sendOTP() {
        const phoneNumber = document.getElementById('phoneNumber').value;
        const appVerifier = recaptchaVerifier;
        firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
            .then((confirmationResult) => {
                // OTP sent successfully
                document.getElementById('otpInput').style.display = 'block';
                window.confirmationResult = confirmationResult;
            }).catch((error) => {
                console.error("Error sending OTP:", error);
            });
    }

    function verifyOTP() {
        const otp = document.getElementById('otp').value;
        window.confirmationResult.confirm(otp)
            .then((result) => {
                // OTP verification successful
                console.log("OTP verified successfully:", result.user);
                // You can now proceed with further actions like signing in the user
            }).catch((error) => {
                console.error("Error verifying OTP:", error);
            });
    }
</script>

</body>
</html>
